---
title: "Guth Analysis Code"
author: "Marin Haluza"
date: "2025-11-15"
output: pdf_document
---
Setting Up Project Directory: CIDATools library was used to create the folders of this project. 

Importing data and creating mean OSCE scores for each domain:
```{r}
urm_scores <- read.csv("C:/Users/marin/OneDrive/BIOS6621-Final-Project/DataRaw/BIOS6621_Guth_data.csv")

urm_scores$mean_phys <- rowMeans(urm_scores[,c("P1SprBates_PhysExamScore", "P1FallBodySys_PhysExamScore", "P2FallRamos_PhysExamScore", "P2FallPayne_PhysExamScore", "P2SpringHyde_PhysExamScore", "P2SpringSnelling_PhysExamScore")], na.rm = TRUE)

urm_scores$mean_comm <- rowMeans(urm_scores[,c("P1SprBates_CommScore", "P2FallRamos_CommScore", "P2FallPayne_CommScore", "P2SpringHyde_CommScore", "P2SpringSnelling_CommScore")], na.rm = TRUE)

urm_scores$mean_meddoc <- rowMeans(urm_scores[,c("P1SprBates_MedDocScore", "P2FallPayne_MedDocScore", "P2SpringHyde_MedDocScore", "P2SpringSnelling_MedDocScore")], na.rm = TRUE)


```

Updating Variable Labels: 
Libraries Used: dplyr
```{r}
library(dplyr)
urm_scores <- urm_scores %>%
  mutate(     
      URM = factor(URM,
      levels = c("0", "1", "3"),
      labels = c("Not Underepresented in Medicine", "Underepresented in Medicine", "Unknown")),
      gender = factor(gender, 
                      levels = c("M", "F", "D"),
                      labels = c("Male", "Female", "Declined")),
          race_cat_desc = trimws(race_cat_desc),   # remove spaces
    race_cat_desc = na_if(race_cat_desc, ""),   # blank â†’ NA
  )

```

Creating a table of baseline characteristics, and mean scores by URM Status.

Libraries used: gtsummary
```{r}
library (gtsummary)
table_1 <- tbl_summary(urm_scores, by = URM, 
                       type = list(P2FallRamos_OralPresScore ~"continuous"),
                       missing = "ifany",
                      missing_text = "(Missing)",
                       statistic = list(all_continuous()~"{mean} ({sd})"), include = c(gender, race_cat_desc, mean_phys, mean_comm, 
                                                                                       mean_meddoc, P2FallRamos_OralPresScore, 
                                                                                       STEP1_ExamScore, STEP2CK_ExamScore ),
                                                              label = list(gender~"Gender",
                                                                           race_cat_desc~"Race",
                                                                           mean_phys~ "Mean Physical Exam OSCE Scores", 
                                                                           mean_comm~"Mean Communication Exam OSCE Scores",
                                                                           mean_meddoc~"Mean Medical Documentation Exam OSCE Scores",
                                                                           P2FallRamos_OralPresScore ~ "Oral Presentation OSCE Scores", 
                                                                           STEP1_ExamScore~ "Step 1 Exam Scores",
                                                                           STEP2CK_ExamScore ~ "Step 2 Exam Scores")) %>%
  modify_caption("Table 1. Participant Characteristics by URM Status")

table_1
                                                                      
```
T-Tests: USMLE Step Scores
Hypothesis - Exploratory: Does Step Scores differ across URM Status.

Libraries Used: ggplot2
```{r}
#Step 1 Scores
t.test(
  STEP1_ExamScore ~ URM,
  data = droplevels(subset(urm_scores, URM != "Unknown"))
)

#Step 1 Visualization 
library(ggplot2)
ggplot(urm_scores, aes(x = URM, y = STEP1_ExamScore, fill = URM)) +
  geom_boxplot() +
  labs(
    x = "URM Status",
    y = "STEP 1 Exam Score",
    title = "Distribution of STEP 1 Exam Scores by URM Status"
  ) +
  theme_minimal() +
  theme(legend.position = "none")

#Step 2 Scores
t.test(
  STEP2CK_ExamScore ~ URM,
  data = droplevels(subset(urm_scores, URM != "Unknown"))
)

#Step 2 Visualization
ggplot(urm_scores, aes(x = URM, y = STEP2CK_ExamScore, fill = URM)) +
  geom_boxplot() +
  labs(
    x = "URM Status",
    y = "STEP 2 Exam Score",
    title = "Distribution of STEP 2 Exam Scores by URM Status"
  ) +
  theme_minimal() +
  theme(legend.position = "none")

```

Chi-Squared Analysis: Clerkship Scores
Hypothesis - Exploratory: Do clerkship scores differ across URM Status.
```{r}

```

T-Tests: Mean OSCE scores for each domain (physical exam, communication exam, documentation exam, and oral presentation)
Hypothesis - Primary: Do mean OSCE scores differ by URM Status across domains?
Adjustments: Bonferroni Adjusted P-Value= (4/0.05)=0.0125
```{r}

```
      race_cat_desc = factor(race_cat_desc, 
                             levels = c("American Indian or Alaska Native", "Asian", "Black or African American", "Other", "White", "Unkown"),
                             labels = c("American Indian or Alaska Native", "Asian", "Black or African American", "Other", "White", "Missing"))

